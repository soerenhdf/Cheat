-- Roblox-Player
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- GUI erstellen
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0, 300, 0, 300)
menuFrame.Position = UDim2.new(0, 50, 0, 50)
menuFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
menuFrame.BackgroundTransparency = 0.5
menuFrame.Parent = screenGui

-- Tab Leiste oben
local tabFrame = Instance.new("Frame")
tabFrame.Size = UDim2.new(1, 0, 0, 30)
tabFrame.Position = UDim2.new(0, 0, 0, 0)
tabFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
tabFrame.BackgroundTransparency = 0.3
tabFrame.Parent = menuFrame

local normalTab = Instance.new("TextButton")
normalTab.Size = UDim2.new(0, 150, 1, 0)
normalTab.Position = UDim2.new(0, 0, 0, 0)
normalTab.Text = "Normal"
normalTab.TextColor3 = Color3.fromRGB(255, 255, 255)
normalTab.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
normalTab.Parent = tabFrame

local bladeBallTab = Instance.new("TextButton")
bladeBallTab.Size = UDim2.new(0, 150, 1, 0)
bladeBallTab.Position = UDim2.new(0, 150, 0, 0)
bladeBallTab.Text = "Blade Ball"
bladeBallTab.TextColor3 = Color3.fromRGB(255, 255, 255)
bladeBallTab.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
bladeBallTab.Parent = tabFrame

-- Die Option-Buttons
local flyButton = Instance.new("TextButton")
flyButton.Size = UDim2.new(0, 250, 0, 50)
flyButton.Position = UDim2.new(0, 25, 0, 50)
flyButton.Text = "Fly"
flyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
flyButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
flyButton.Parent = menuFrame

local tpAuraButton = Instance.new("TextButton")
tpAuraButton.Size = UDim2.new(0, 250, 0, 50)
tpAuraButton.Position = UDim2.new(0, 25, 0, 105)
tpAuraButton.Text = "TP Aura"
tpAuraButton.TextColor3 = Color3.fromRGB(255, 255, 255)
tpAuraButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
tpAuraButton.Parent = menuFrame

local wallHackButton = Instance.new("TextButton")
wallHackButton.Size = UDim2.new(0, 250, 0, 50)
wallHackButton.Position = UDim2.new(0, 25, 0, 160)
wallHackButton.Text = "WallHack"
wallHackButton.TextColor3 = Color3.fromRGB(255, 255, 255)
wallHackButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
wallHackButton.Parent = menuFrame

local bladeBallButton = Instance.new("TextButton")
bladeBallButton.Size = UDim2.new(0, 250, 0, 50)
bladeBallButton.Position = UDim2.new(0, 25, 0, 215)
bladeBallButton.Text = "Blade Ball Hack"
bladeBallButton.TextColor3 = Color3.fromRGB(255, 255, 255)
bladeBallButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
bladeBallButton.Parent = menuFrame

-- Close Button
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 100, 0, 50)
closeButton.Position = UDim2.new(0, 100, 0, 270)
closeButton.Text = "Close"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
closeButton.Parent = menuFrame

-- Minimieren Button
local minimizeButton = Instance.new("TextButton")
minimizeButton.Size = UDim2.new(0, 50, 0, 50)
minimizeButton.Position = UDim2.new(0, 250, 0, 0)
minimizeButton.Text = "-"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
minimizeButton.Parent = menuFrame

-- Fly-Funktion
local isFlying = false
local function toggleFly()
    isFlying = not isFlying
    if isFlying then
        humanoidRootPart.Anchored = true  -- Flug aktivieren
        humanoidRootPart.CFrame = humanoidRootPart.CFrame + Vector3.new(0, 50, 0)  -- Spieler nach oben bewegen
    else
        humanoidRootPart.Anchored = false  -- Flug deaktivieren
    end
end

-- TP Aura Funktion
local tpAuraEnabled = false
local function toggleTPAura()
    tpAuraEnabled = not tpAuraEnabled
    while tpAuraEnabled do
        wait(0.1)
        -- Teleportiere zu einem zufälligen Spieler
        local nearestPlayer = nil
        local shortestDistance = math.huge
        for _, otherPlayer in ipairs(game.Players:GetPlayers()) do
            if otherPlayer ~= player then
                local distance = (character.HumanoidRootPart.Position - otherPlayer.Character.HumanoidRootPart.Position).magnitude
                if distance < shortestDistance then
                    shortestDistance = distance
                    nearestPlayer = otherPlayer
                end
            end
        end
        if nearestPlayer then
            humanoidRootPart.CFrame = nearestPlayer.Character.HumanoidRootPart.CFrame
        end
    end
end

-- Wallhack Funktion
local function toggleWallhack()
    for _, obj in ipairs(workspace:GetChildren()) do
        if obj:IsA("Model") and obj:FindFirstChild("Humanoid") then
            local box = Instance.new("BoxHandleAdornment")
            box.Adornee = obj:FindFirstChild("Head") or obj:FindFirstChild("HumanoidRootPart")
            box.Size = Vector3.new(3, 6, 3)
            box.Color3 = Color3.fromRGB(255, 0, 0)  -- Roter Kasten
            box.Parent = obj
        end
    end
end

-- Blade Ball Funktion
local function bladeBall()
    print("Blade Ball aktivieren")  -- Debug-Ausgabe
    -- Logik für Blade Ball einfügen
end

-- Close Button Funktion
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()  -- Menü schließen
end)

-- Fly Button Funktion
flyButton.MouseButton1Click:Connect(function()
    toggleFly()  -- Fly-Funktion aufrufen
end)

-- TP Aura Button Funktion
tpAuraButton.MouseButton1Click:Connect(function()
    toggleTPAura()  -- TP Aura-Funktion aufrufen
end)

-- WallHack Button Funktion
wallHackButton.MouseButton1Click:Connect(function()
    toggleWallhack()  -- Wallhack-Funktion aufrufen
end)

-- Blade Ball Button Funktion
bladeBallButton.MouseButton1Click:Connect(function()
    bladeBall()  -- Blade Ball Funktion aufrufen
end)

-- Minimieren des Menüs
local minimized = false
minimizeButton.MouseButton1Click:Connect(function()
    if minimized then
        menuFrame.Size = UDim2.new(0, 300, 0, 300)
        minimized = false
        minimizeButton.Text = "-"
        flyButton.Visible = true
        tpAuraButton.Visible = true
        wallHackButton.Visible = true
        bladeBallButton.Visible = true
        closeButton.Visible = true
    else
        menuFrame.Size = UDim2.new(0, 50, 0, 50)
        minimized = true
        minimizeButton.Text = "+"
        flyButton.Visible = false
        tpAuraButton.Visible = false
        wallHackButton.Visible = false
        bladeBallButton.Visible = false
        closeButton.Visible = false
    end
end)

-- Tab-Wechsel
local function switchTab(tab)
    if tab == "normal" then
        flyButton.Visible = true
        tpAuraButton.Visible = true
        wallHackButton.Visible = true
        bladeBallButton.Visible = false
    elseif tab == "bladeball" then
        flyButton.Visible = false
        tpAuraButton.Visible = false
        wallHackButton.Visible = false
        bladeBallButton.Visible = true
    end
end

normalTab.MouseButton1Click:Connect(function()
    switchTab("normal")  -- Normal Tab aktivieren
end)

bladeBallTab.MouseButton1Click:Connect(function()
    switchTab("bladeball")  -- Blade Ball Tab aktivieren
end)

-- Menü verschiebbar machen
local dragging = false
local dragStart = nil
local startPos = nil

menuFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = menuFrame.Position
    end
end)

menuFrame.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        menuFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

menuFrame.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Sicherstellen, dass das GUI auch angezeigt wird
screenGui.Enabled = true
