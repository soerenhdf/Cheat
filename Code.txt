-- Initial Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Frame for the menu
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0, 300, 0, 500)
menuFrame.Position = UDim2.new(0, 50, 0, 50)
menuFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
menuFrame.BackgroundTransparency = 0.5
menuFrame.Parent = screenGui

-- Menu title
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 40)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.Text = "Crash Stars Hack Menu"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextSize = 24
titleLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
titleLabel.BackgroundTransparency = 0.5
titleLabel.Parent = menuFrame

-- Buttons for different cheats
local flyButton = Instance.new("TextButton")
flyButton.Size = UDim2.new(1, 0, 0, 40)
flyButton.Position = UDim2.new(0, 0, 0, 40)
flyButton.Text = "Fly"
flyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
flyButton.TextSize = 20
flyButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
flyButton.BackgroundTransparency = 0.5
flyButton.Parent = menuFrame

local tpAuraButton = Instance.new("TextButton")
tpAuraButton.Size = UDim2.new(1, 0, 0, 40)
tpAuraButton.Position = UDim2.new(0, 0, 0, 80)
tpAuraButton.Text = "TP Aura"
tpAuraButton.TextColor3 = Color3.fromRGB(255, 255, 255)
tpAuraButton.TextSize = 20
tpAuraButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
tpAuraButton.BackgroundTransparency = 0.5
tpAuraButton.Parent = menuFrame

local wallHackButton = Instance.new("TextButton")
wallHackButton.Size = UDim2.new(1, 0, 0, 40)
wallHackButton.Position = UDim2.new(0, 0, 0, 120)
wallHackButton.Text = "Wall Hack"
wallHackButton.TextColor3 = Color3.fromRGB(255, 255, 255)
wallHackButton.TextSize = 20
wallHackButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
wallHackButton.BackgroundTransparency = 0.5
wallHackButton.Parent = menuFrame

local bladeBallButton = Instance.new("TextButton")
bladeBallButton.Size = UDim2.new(1, 0, 0, 40)
bladeBallButton.Position = UDim2.new(0, 0, 0, 160)
bladeBallButton.Text = "Blade Ball"
bladeBallButton.TextColor3 = Color3.fromRGB(255, 255, 255)
bladeBallButton.TextSize = 20
bladeBallButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
bladeBallButton.BackgroundTransparency = 0.5
bladeBallButton.Parent = menuFrame

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 40, 0, 40)
closeButton.Position = UDim2.new(1, -40, 0, 0)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.TextSize = 20
closeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
closeButton.BackgroundTransparency = 0.5
closeButton.Parent = menuFrame

-- Functionality for Fly
local isFlying = false
local bodyVelocity = nil
flyButton.MouseButton1Click:Connect(function()
    isFlying = not isFlying
    if isFlying then
        bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
        bodyVelocity.Velocity = Vector3.new(0, 50, 0)
        bodyVelocity.Parent = game.Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
    else
        if bodyVelocity then
            bodyVelocity:Destroy()
            bodyVelocity = nil
        end
    end
end)

-- Functionality for TP Aura
local function tpAura()
    local player = game.Players.LocalPlayer
    local character = player.Character
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    while true do
        wait(0.1)
        if not isFlying then
            local closestPlayer = nil
            local minDistance = 100000
            for _, otherPlayer in pairs(game.Players:GetPlayers()) do
                if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    local otherPlayerRootPart = otherPlayer.Character.HumanoidRootPart
                    local distance = (humanoidRootPart.Position - otherPlayerRootPart.Position).Magnitude
                    if distance < minDistance then
                        closestPlayer = otherPlayerRootPart
                        minDistance = distance
                    end
                end
            end
            if closestPlayer then
                humanoidRootPart.CFrame = CFrame.new(closestPlayer.Position + Vector3.new(0, 5, 0))
            end
        end
    end
end
tpAuraButton.MouseButton1Click:Connect(function()
    tpAura()
end)

-- Functionality for Wall Hack
local function wallHack()
    for _, part in pairs(workspace:GetChildren()) do
        if part:IsA("BasePart") then
            part.Material = Enum.Material.SmoothPlastic
            part.Transparency = 0.5
        end
    end
end
wallHackButton.MouseButton1Click:Connect(function()
    wallHack()
end)

-- Blade Ball Hack
local function bladeBall()
    local ball = workspace:FindFirstChild("Ball")  -- Stelle sicher, dass der Ball im Spiel vorhanden ist
    if ball then
        local humanoidRootPart = game.Players.LocalPlayer.Character.HumanoidRootPart
        while true do
            wait(0.1)
            local direction = (ball.Position - humanoidRootPart.Position).unit
            local targetPosition = ball.Position + direction * 5  -- Abstand zum Ball
            humanoidRootPart.CFrame = CFrame.new(targetPosition)
            humanoidRootPart.Velocity = direction * 100  -- Sehr schnelle Bewegung
            humanoidRootPart.CFrame = CFrame.lookAt(humanoidRootPart.Position, ball.Position)
        end
    end
end
bladeBallButton.MouseButton1Click:Connect(function()
    bladeBall()
end)

-- Function to close the menu
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Make the menu movable
local dragging = false
local dragInput, dragStart, startPos
menuFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = menuFrame.Position
    end
end)

menuFrame.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        menuFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

menuFrame.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)
